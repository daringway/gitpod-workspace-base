#!/usr/bin/bash

# *** Config node
if [[ -v ENV_NODE_VERSION ]]
then
  source "$NVM_DIR"/nvm.sh && \
  nvm install ${ENV_NODE_VERSION} && \
  nvm use $ENV_NODE_VERSION && \
  nvm alias default ${ENV_NODE_VERSION}
fi

if [[ -v ENV_YARN_VERSION ]]
then
    curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | sudo apt-key add -
    echo "deb https://dl.yarnpkg.com/debian/ stable main" | sudo tee /etc/apt/sources.list.d/yarn.list
    sudo apt update

    if [[ $ENV_YARN_VERSION == "latest" ]]
    then
        sudo apt install --no-install-recommends yarn
    else
        sudo apt install --no-install-recommends yarn@${ENV_YARN_VERSION}
    fi
fi